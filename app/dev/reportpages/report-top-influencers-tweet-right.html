<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="   sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,800&display=swap" rel="stylesheet">

    <link href="css/report-top-influencers-tweet-right.css" rel="stylesheet">

    <title>Buzz Radar Reports Page</title>

  </head>

  <body>

    <div id="report_slide" class="report-top-influencers-tweet-right" style="top:{{slideTop}}px;">

      <div class="slide-background">
        
        <div class="bubbles">
          <div class="b-top"></div>
          <div class="b-middle"></div>
          <div class="b-bottom"></div>
        </div>
        <div class="left-bar orange"></div>
        <div class="right-bar orange"></div>
        <div class="vertical"></div>

      </div>

      <div class="slide">
          
          <div class="report_title">
              <div class="top">{{report.name}}</div>
              <div class="bottom">{{topic.name}}: Most Influential</div>
          </div>

          <div class="content">


            <div class="main-layout-wrap">
              <div class="col1">
                <!-- <div class="col_title">Top Influencers</div> -->

                <div class="most_4_influencial_holder">
                  <!-- Javascript -->
                </div>

              </div>
              <div class="col2">
                <div class="col_title">Most Influential Post about Topic</div>
                
                <div style="position: relative;">
                    <div class="avatar big" style="background-image: url('https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/avatar/avatar1.jpg');">                    
                    </div>
                    <div class="info_avatar">
                        <!-- javascript -->
                    </div>
                </div>

                <div class="tweet_holder">
                  <!-- Javascript -->
                </div>

              </div>
            </div>



            
          </div>


      </div>

      <div class="footer">
          <div class="date-range">Date Range: {{fromDate | date('jS M Y') }} - {{ toDate | date('jS M Y') }}</div>
          <img src="https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/logos/RGB_NAME_WHITEBG_SMALL72.png" width="200">
      </div>

    </div>





    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="../libraries/amcharts/amcharts.js"></script>
    <script src="../libraries/amcharts/serial.js"></script>
    <script src="../libraries/amcharts/pie.js"></script>

    <script>

      var TopInfluencersInstance = function () {


        var pageDataJS = {"twitterMostInfluential":[{"universeCategory":[],"id":469496775,"feedTwitterMention":5243,"approved":true,"created":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1594477504},"tweetId":"1281952369610313728","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1594476237},"username":"rockanddirt","name":"Rock & Dirt","description":"Known as The Equipment Marketplace, Rock & Dirt offers the largest selection of heavy equipment for sale found anywhere.","profileImageUrl":"http://pbs.twimg.com/profile_images/657236005272080384/gdOgEm4f_normal.jpg","followers":16815,"friends":1533,"imageUrl":null,"content":"VOLVO CE DONATES $290,000 TO TWO NONPROFITS FROM AUCTION OF GOLD RUSH EXCAVATOR! Find out more atâ€¦ https://t.co/6UnAQT4B4N","retweets":2,"likes":3,"sentiment":0,"countryCode":null,"country":null,"userLocation":"Crossville, TN","lang":null,"originalTweetId":null,"originalRetweets":null,"originalUsername":null,"originalDate":null,"originalProfileImageUrl":null,"originalFollowers":0,"feedTwitterMentionGroupId":null,"userVerified":false,"topInfluential":true,"topInfluentialApproved":true,"topPositive":null,"topNegative":null,"adultVerified":false,"highlight":null,"visionSafeSearchAdult":null,"safeSearchAdult":null,"visionSafeSearchSpoof":null,"safeSearchSpoof":null,"visionSafeSearchMedical":null,"safeSearchMedical":null,"visionSafeSearchViolence":null,"safeSearchViolence":null,"visionSafeSearchRacy":null,"safeSearchRacy":null,"source":null},{"universeCategory":[],"id":467875083,"feedTwitterMention":5243,"approved":true,"created":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1593604804},"tweetId":"1278289720490033154","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1593602993},"username":"HighwaysToday","name":"Highways.Today","description":"News & Resources for the International #Construction Industry - #Highways, #Airfields, #Rail, #Tunnels & #Bridges. Stories & press releases welcome.","profileImageUrl":"http://pbs.twimg.com/profile_images/667789673373282304/lIJmuoer_normal.png","followers":3669,"friends":4332,"imageUrl":null,"content":"VolvoCE wins prestigious ERA sustainability award. \n\n#Construction #Sustainability #Award #Volvo  \n@VolvoCEGlobal  \nhttps://t.co/zJuJj2LSO2","retweets":0,"likes":1,"sentiment":0,"countryCode":null,"country":null,"userLocation":"International","lang":null,"originalTweetId":null,"originalRetweets":null,"originalUsername":null,"originalDate":null,"originalProfileImageUrl":null,"originalFollowers":0,"feedTwitterMentionGroupId":null,"userVerified":false,"topInfluential":true,"topInfluentialApproved":true,"topPositive":null,"topNegative":null,"adultVerified":false,"highlight":null,"visionSafeSearchAdult":null,"safeSearchAdult":null,"visionSafeSearchSpoof":null,"safeSearchSpoof":null,"visionSafeSearchMedical":null,"safeSearchMedical":null,"visionSafeSearchViolence":null,"safeSearchViolence":null,"visionSafeSearchRacy":null,"safeSearchRacy":null,"source":null},{"universeCategory":[],"id":469496774,"feedTwitterMention":5243,"approved":true,"created":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1594477504},"tweetId":"1281955738068361218","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1594477040},"username":"tina_mallard","name":"Tina - Mallard","description":"Lic. Driller, Risk/Env Assessor-Insp Certified, Water Well Inspector/Rehab. OSHA Cert. 30+ yrs \nAgriculture, Woodwork \nMALLARD, INC.\nWBE/DBE Certified Company.","profileImageUrl":"http://pbs.twimg.com/profile_images/815217670262059008/ohMssDew_normal.jpg","followers":1770,"friends":2426,"imageUrl":null,"content":"VOLVO CE DONATES $290,000 TO TWO NONPROFITS FROM AUCTION OF GOLD RUSH EXCAVATOR! Find out more atâ€¦ https://t.co/6UnAQT4B4N","retweets":0,"likes":0,"sentiment":0,"countryCode":null,"country":null,"userLocation":"Southeastern, USA","lang":null,"originalTweetId":"1281952369610313728","originalRetweets":2,"originalUsername":"rockanddirt","originalDate":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1594476237},"originalProfileImageUrl":"http://pbs.twimg.com/profile_images/657236005272080384/gdOgEm4f_normal.jpg","originalFollowers":16815,"feedTwitterMentionGroupId":null,"userVerified":false,"topInfluential":true,"topInfluentialApproved":true,"topPositive":null,"topNegative":null,"adultVerified":false,"highlight":null,"visionSafeSearchAdult":null,"safeSearchAdult":null,"visionSafeSearchSpoof":null,"safeSearchSpoof":null,"visionSafeSearchMedical":null,"safeSearchMedical":null,"visionSafeSearchViolence":null,"safeSearchViolence":null,"visionSafeSearchRacy":null,"safeSearchRacy":null,"source":null},{"universeCategory":[],"id":469201586,"feedTwitterMention":5243,"approved":true,"created":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1594389604},"tweetId":"1281582142380744704","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1594387968},"username":"hrbomber1414","name":"ðŸŽ®ðŸ’£HRBomberðŸ’£ðŸŽ®","description":"hrbomber1414@gmail.com\nhttps://www.youtube.com/gamingbeyondthebox\nPodcast on Wednesdays @ 8PM EST\nGT & PSN: HRBomber","profileImageUrl":"http://pbs.twimg.com/profile_images/1274106783628431361/GJklddP5_normal.jpg","followers":1528,"friends":1315,"imageUrl":null,"content":"@JOXRoundtable @CowinEquipment @TakeuchiMFG @VolvoCE_NA @jimdunaway @TheLanceTaylor @RyanBrownWJOX ummm ... may neeâ€¦ https://t.co/DzH1Mt2GTq","retweets":0,"likes":0,"sentiment":0,"countryCode":null,"country":null,"userLocation":"Alabama","lang":null,"originalTweetId":null,"originalRetweets":null,"originalUsername":null,"originalDate":null,"originalProfileImageUrl":null,"originalFollowers":0,"feedTwitterMentionGroupId":null,"userVerified":false,"topInfluential":true,"topInfluentialApproved":true,"topPositive":null,"topNegative":null,"adultVerified":false,"highlight":null,"visionSafeSearchAdult":null,"safeSearchAdult":null,"visionSafeSearchSpoof":null,"safeSearchSpoof":null,"visionSafeSearchMedical":null,"safeSearchMedical":null,"visionSafeSearchViolence":null,"safeSearchViolence":null,"visionSafeSearchRacy":null,"safeSearchRacy":null,"source":null},{"universeCategory":[],"id":470371844,"feedTwitterMention":5243,"approved":true,"created":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1595004629},"tweetId":"1284168191770537988","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1595004530},"username":"HoffmanEquip","name":"Hoffman Equipment","description":"Hoffman Equipment is a full line heavy equipment dealership offering sales, rentals, and product support to both domestic and international markets.","profileImageUrl":"http://pbs.twimg.com/profile_images/901102469819781120/YJW00w8f.jpg","followers":1498,"friends":85,"imageUrl":null,"content":"#rp from a Patrick Hitpas, Director of Customer Support at Hoffman.\nâ€œDonâ€™t forget to keep up with your PM services during the summer. Call us if you need help keeping your fleet maintained. @HoffmanEquip @VolvoCE_NA \nImprove uptime & productivity. Give us a call! 732-752-3600! https://t.co/NwDmNbA1TH","retweets":0,"likes":0,"sentiment":5,"countryCode":"US","country":"United States","userLocation":"Piscataway, NJ","lang":"en","originalTweetId":null,"originalRetweets":0,"originalUsername":null,"originalDate":null,"originalProfileImageUrl":null,"originalFollowers":0,"feedTwitterMentionGroupId":null,"userVerified":false,"topInfluential":true,"topInfluentialApproved":true,"topPositive":true,"topNegative":null,"adultVerified":false,"highlight":false,"visionSafeSearchAdult":null,"safeSearchAdult":null,"visionSafeSearchSpoof":null,"safeSearchSpoof":null,"visionSafeSearchMedical":null,"safeSearchMedical":null,"visionSafeSearchViolence":null,"safeSearchViolence":null,"visionSafeSearchRacy":null,"safeSearchRacy":null,"source":null}]};


        var pageId = '';
        var slideDom = $('#report_slide'+pageId);
        var custom = {
            color : '#8ebf6a',
            vendorLogoURL : 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/bg/buzzradar_logo_reports.png',
            bgURL : 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/bg/br_reports_bg.jpg',
          };
        console.log("Unique Page ID:", "report_slide"+pageId);
        console.log(pageDataJS);

        var formatNumber = function(value) {
            var finalValue;
            if (value > 1000000) {
              finalValue = Number((value/1000000).toFixed(2)) +'M';
              return finalValue;
            }
            if (value > 1000) {
              finalValue = Number((value/1000).toFixed(2)) +'K';
              return finalValue;
            }else{
              finalValue = value;
              return finalValue;
            }
          };

        var showStatsContent = function(tweetInfo) {
            var ret = 'Likes '+ tweetInfo.likes + ' Retweets '+tweetInfo.retweets;
            return ret;
          };

        var getSocialIcon = function(social) {

          switch(social) {
            case "twitter":
              return 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/social/twitter_bird.png';
            break;
            case "facebook":
              return 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/social/facebook.png';
            break;
            case "instagram":
              return 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/social/instagram.png';
            break;
          }

        };



        var converUnixDateJavascript = function(UNIX_timestamp) {

          var a = new Date(UNIX_timestamp * 1000);
          var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
          var year = a.getFullYear();
          var month = months[a.getMonth()];
          var date = a.getDate();
          var hour = a.getHours();
          var min = a.getMinutes();
          var sec = a.getSeconds();
          var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;
          return time;

        };



        var displayMostInfluential = function(pageDataJS) {

          var dom = slideDom.find('.tweet_holder');
          var tweetInfo = pageDataJS.twitterMostInfluential[0];



          function loadInluencerIntoDOM(tweetInfo) {

            var template = '<div class="tweet">';
                      template += '<img class="social_network_corner_logo" src="'+getSocialIcon('twitter')+'" width="40" />';
                      template += '<div class="profile_pic" style="background-image: url(\''+tweetInfo.profileImageUrl+'\');"></div>';
                      template += '<div class="handle">';
                      template += tweetInfo.name+' @'+tweetInfo.username+'<br>';
                      template += '<span>'+formatNumber(tweetInfo.followers)+' Followers</span>';
                      template += '</div>';
                      template += '<div class="copy">'+tweetInfo.content+'</div>';
                      template += '<div class="date"><u>'+ converUnixDateJavascript(tweetInfo.created.timestamp)+'</u> <strong>'+showStatsContent(tweetInfo)+'</strong></div>';
                      template += '<div class="retweet_triangle"></div>';
                  template += '</div>';
            dom.html(template);

            //Info Top Influential
            dom = slideDom.find('.info_avatar');
            var topInfluentialTemplate  = tweetInfo.name+'<br>'+' @'+tweetInfo.username+'<br><span class="big_follower">'+formatNumber(tweetInfo.followers)+' Followers</span>';
            dom.html(topInfluentialTemplate);

            //Big Avatar
            dom = slideDom.find('.avatar.big');
            dom.css({'background-image': 'url('+tweetInfo.profileImageUrl+')' });

          };


          tweetInfo.profileImageUrl = tweetInfo.profileImageUrl.replace('http://','https://');
          $.get(tweetInfo.profileImageUrl)

            .done(function() { 
                // Do something now you know the image exists.
                console.log("done!!!!");
                loadInluencerIntoDOM(tweetInfo);                  
            }).fail(function() { 
                // Image doesn't exist - replace avatar with the EGG
                console.log("fail!!!!!!!!!!!");
                tweetInfo.profileImageUrl = 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/avatar/Twitter_NoProfileImage600x600.png';
                loadInluencerIntoDOM(tweetInfo);                  
            }); 

        };

        var getLocationInfluencer = function(tweetInfo) {

          var ret = '';
          if (tweetInfo.country) {
            ret = '<div class="job">'+tweetInfo.country+'</div>';
          }
          return ret;

        };


        var display4MostInfluential = function(pageDataJS) {

            function loadInluencerIntoDOM(tweetModel) {
              var dom = slideDom.find('.most_4_influencial_holder');
              var template = '<div class="influencer">';
                        template += '<div class="avatar" style="background-image: url('+tweetModel.profileImageUrl+');top:0px;left:0px;"></div>';
                        template += '<div class="name">'+tweetModel.name+'</div>';
                        template += getLocationInfluencer(tweetModel);
                        template += '<div class="followers"><strong>'+formatNumber(tweetModel.followers)+'</strong> Followers</div>';
                    template += '</div>';
              dom.append(template);
            }

            function loadImage(tweetInfo) {
              tweetInfo.profileImageUrl = tweetInfo.profileImageUrl.replace('http://','https://');
              $.get(tweetInfo.profileImageUrl)
                .done(function() { 
                    // Do something now you know the image exists.
                    console.log("done!!!!");
                    loadInluencerIntoDOM(tweetInfo);
                }).fail(function() { 
                    // Image doesn't exist - replace avatar with the EGG
                    console.log("fail!!!!!!!!!!!");
                    tweetInfo.profileImageUrl = 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/avatar/Twitter_NoProfileImage600x600.png';
                    loadInluencerIntoDOM(tweetInfo);                  
                });              
            }

            var i = 1;
            for (var i = 1; i < pageDataJS.twitterMostInfluential.length; i++) {
              loadImage(pageDataJS.twitterMostInfluential[i]);
            }

        };

        var customize = function(customObject) {

            //Change Color
            var newColor = customObject.color;
            slideDom.find('.slide-background').find('.left-bar').css('background',newColor);
            slideDom.find('.slide-background').find('.right-bar').css('background',newColor);
            slideDom.find('.report_title').css('borderColor',newColor);

            //Change Vendor Logo
            //Developer Note: To avoid having issues placing the different logos, they must be 
            //created within this dimensions: 300 x 131
            slideDom.find('.footer').find('img').attr('src',customObject.vendorLogoURL);
            slideDom.find('.footer').find('img').css('marginTop',-25);
            slideDom.find('.footer').find('img').css('width',170);

          };


        return {
            init: function () {
              displayMostInfluential(pageDataJS);
              display4MostInfluential(pageDataJS);
              customize(custom);
            }
        };
        
      }();

      TopInfluencersInstance.init();

    </script>


  </body>
</html>
