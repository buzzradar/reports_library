<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="   sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,800&display=swap" rel="stylesheet">

    <link href="css/report-3-most-effective-posts.css" rel="stylesheet">
    
    <title>Buzz Radar Reports Page</title>

  </head>

  <body>

    <div id="report_slide" class="report-3-most-effective-posts" style="top:{{slideTop}}px;">

      <div class="slide-background">
        
        <div class="bubbles">
          <div class="b-top"></div>
          <div class="b-middle"></div>
          <div class="b-bottom"></div>
        </div>
        <div class="left-bar orange"></div>
        <div class="right-bar orange"></div>
        <div class="vertical"></div>

      </div>

      <div class="slide">
          
          <div class="report_title">
              <div class="top">{{report.name}}</div>
              <div class="bottom">{{topic.name}}: Most Effective Owned Content</div>
          </div>

          <div class="content">
            <div class="main-layout-wrap">
              <div class="col1">
                <!-- <h1>Potential Reach: X.XM</h1> -->
                
                <div class="most_effective_content">
                  <!-- Javascript -->
                  

                  <!-- <div class="retweet twitter">
                    <img class="social_network_corner_logo" src="https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/social/twitter_bird.png" width="40">
                    <div class="grade"></div>
                    <div class="avatar" style="background-image: url(http://pbs.twimg.com/profile_images/1024960867845197824/40BZozPb_normal.jpg);"></div>
                    <div class="handle">
                      Burberry<br>
                      <div class="followers">8.38 M Followers</div></div>
                      <div class="copy">A unique marriage of @Burberry heritage and modernity. Our form-fitting knee-high sock boots in signature check. Shâ€¦ https://t.co/sdb5GY9TzR</div>
                      <div class="date"><u>Mon, 19 Jan 1970 06:47:02 GMT</u> <strong>114 Likes 17 Retweets </strong>      <div class="eng-rate"><span>111 <i class="fa fa-mouse-pointer"></i></span><span>2222% <i class="fa fa-chain"></i></span></div>         
                    </div>
                    <div class="retweet_triangle twitter"></div>
                    </div>
                </div> -->



                
              </div>
            </div>

          </div>


      </div>

      <div class="footer">
          <div class="date-range">Date Range: {{fromDate | date('jS M Y') }} - {{ toDate | date('jS M Y') }}</div>
          <img src="https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/logos/RGB_NAME_WHITEBG_SMALL72.png" width="200">
      </div>

    </div>





    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>


    <script>



      var ThreeMostEffectivePostInstance = function () {

        var pageDataJS = {"twitterDailyReach":{"chart":[{"created":"2020-02-02 00:00:00+00","social_reach":18174682,"date":"February 02, 2020"},{"created":"2020-02-03 00:00:00+00","social_reach":7538834,"date":"February 03, 2020"},{"created":"2020-02-04 00:00:00+00","social_reach":38069725,"date":"February 04, 2020"},{"created":"2020-02-05 00:00:00+00","social_reach":10663985,"date":"February 05, 2020"},{"created":"2020-02-06 00:00:00+00","social_reach":151394894,"date":"February 06, 2020"},{"created":"2020-02-07 00:00:00+00","social_reach":18708410,"date":"February 07, 2020"},{"created":"2020-02-08 00:00:00+00","social_reach":17633460,"date":"February 08, 2020"},{"created":"2020-02-09 00:00:00+00","social_reach":5126937,"date":"February 09, 2020"},{"created":"2020-02-10 00:00:00+00","social_reach":84951888,"date":"February 10, 2020"},{"created":"2020-02-11 00:00:00+00","social_reach":57931443,"date":"February 11, 2020"},{"created":"2020-02-12 00:00:00+00","social_reach":106259818,"date":"February 12, 2020"},{"created":"2020-02-13 00:00:00+00","social_reach":67827557,"date":"February 13, 2020"},{"created":"2020-02-14 00:00:00+00","social_reach":96367372,"date":"February 14, 2020"},{"created":"2020-02-15 00:00:00+00","social_reach":234632898,"date":"February 15, 2020"},{"created":"2020-02-16 00:00:00+00","social_reach":66170421,"date":"February 16, 2020"},{"created":"2020-02-17 00:00:00+00","social_reach":25991489,"date":"February 17, 2020"},{"created":"2020-02-18 00:00:00+00","social_reach":28351664,"date":"February 18, 2020"},{"created":"2020-02-19 00:00:00+00","social_reach":27409935,"date":"February 19, 2020"},{"created":"2020-02-20 00:00:00+00","social_reach":72535070,"date":"February 20, 2020"},{"created":"2020-02-21 00:00:00+00","social_reach":9090529,"date":"February 21, 2020"},{"created":"2020-02-22 00:00:00+00","social_reach":68731447,"date":"February 22, 2020"},{"created":"2020-02-23 00:00:00+00","social_reach":38288574,"date":"February 23, 2020"},{"created":"2020-02-24 00:00:00+00","social_reach":6712309,"date":"February 24, 2020"},{"created":"2020-02-25 00:00:00+00","social_reach":39139187,"date":"February 25, 2020"},{"created":"2020-02-26 00:00:00+00","social_reach":17544946,"date":"February 26, 2020"},{"created":"2020-02-27 00:00:00+00","social_reach":45782316,"date":"February 27, 2020"},{"created":"2020-02-28 00:00:00+00","social_reach":77350237,"date":"February 28, 2020"},{"created":"2020-02-29 00:00:00+00","social_reach":258062401,"date":"February 29, 2020"},{"created":"2020-03-01 00:00:00+00","social_reach":45312687,"date":"March 01, 2020"},{"created":"2020-03-02 00:00:00+00","social_reach":19077421,"date":"March 02, 2020"}],"total":1760832536},"top3MostEffectivePosts":[{"source":"facebook","user_id":"194720757256597","username":"Volvo Construction Equipment North America","avatar":"https://e604928705f12d99b679-75d66e349be7351b0bb87db3c2ed768a.ssl.cf3.rackcdn.com/facebook-avatar/194720757256597.jpg","name":"","followers":false,"content":"Volvo A45G and EC750s moving earth to build a 55 billion gallon reservoir, part of the Everglades restoration project in south Florida.  Saving our wildlife habitat and keeping our oceans and beaches clean! Flagler Construction Equipment  South Florida Water Management District Lane & Company Construction, Inc.","image":"https://e604928705f12d99b679-75d66e349be7351b0bb87db3c2ed768a.ssl.cf3.rackcdn.com//facebook-image/194720757256597_2798636436865003.jpg","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1580843444},"showValues":[{"value":1177,"label":"Likes"},{"value":84,"label":"Shares"},{"value":40,"label":"Comments"}],"score":8383,"label":"A+","postActivity":1295,"postClicks":7088},{"source":"twitter","user_id":false,"username":"FIAFormulaE","avatar":"http://pbs.twimg.com/profile_images/1067353158219894784/5lSAYUFo_normal.jpg","name":"ABB Formula E","followers":212795,"content":"This is the car we will crown our very first World Champion in next season ðŸ† #Gen2EVO https://t.co/EN7wNuP3M5","image":"http://pbs.twimg.com/media/EP7I9r5XsAAMse_.jpg","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1580811216},"showValues":[{"value":522,"label":"Likes"},{"value":202,"label":"Retweets"}],"score":724,"label":"A","engagements":724,"engagementRate":"0.340%"},{"source":"twitter","user_id":false,"username":"FIAFormulaE","avatar":"http://pbs.twimg.com/profile_images/1067353158219894784/5lSAYUFo_normal.jpg","name":"ABB Formula E","followers":214815,"content":".@mitchevans_ WINS the 2020 CBMM Niobium #MexicoCityEPrix âš¡ï¸ https://t.co/azyWTEDeJg","image":"http://pbs.twimg.com/media/EQ2gM_IXkAAmB6g.jpg","date":{"timezone":{"name":"UTC","transitions":[{"ts":-9223372036854776000,"time":"-292277022657-01-27T08:29:52+0000","offset":0,"isdst":false,"abbr":"UTC"}],"location":{"country_code":"??","latitude":0,"longitude":0,"comments":"?"}},"offset":0,"timestamp":1581807165},"showValues":[{"value":456,"label":"Likes"},{"value":174,"label":"Retweets"}],"score":630,"label":"A","engagements":630,"engagementRate":"0.293%"}]};

        var pageDataJS = {"twitterDailyReach":{"chart":[{"created":"2020-06-29 00:00:00+00","social_reach":67024,"date":"June 29, 2020"},{"created":"2020-06-30 00:00:00+00","social_reach":70405,"date":"June 30, 2020"},{"created":"2020-07-01 00:00:00+00","social_reach":18278,"date":"July 01, 2020"},{"created":"2020-07-02 00:00:00+00","social_reach":83770,"date":"July 02, 2020"},{"created":"2020-07-03 00:00:00+00","social_reach":42800,"date":"July 03, 2020"},{"created":"2020-07-04 00:00:00+00","social_reach":36183,"date":"July 04, 2020"},{"created":"2020-07-05 00:00:00+00","social_reach":117110,"date":"July 05, 2020"},{"created":"2020-07-06 00:00:00+00","social_reach":35500,"date":"July 06, 2020"},{"created":"2020-07-07 00:00:00+00","social_reach":9449,"date":"July 07, 2020"},{"created":"2020-07-08 00:00:00+00","social_reach":201402,"date":"July 08, 2020"},{"created":"2020-07-09 00:00:00+00","social_reach":401084,"date":"July 09, 2020"},{"created":"2020-07-10 00:00:00+00","social_reach":91320,"date":"July 10, 2020"},{"created":"2020-07-11 00:00:00+00","social_reach":187161,"date":"July 11, 2020"},{"created":"2020-07-12 00:00:00+00","social_reach":34043,"date":"July 12, 2020"},{"created":"2020-07-13 00:00:00+00","social_reach":152971,"date":"July 13, 2020"},{"created":"2020-07-14 00:00:00+00","social_reach":188989,"date":"July 14, 2020"},{"created":"2020-07-15 00:00:00+00","social_reach":31716,"date":"July 15, 2020"},{"created":"2020-07-16 00:00:00+00","social_reach":197245,"date":"July 16, 2020"},{"created":"2020-07-17 00:00:00+00","social_reach":83993,"date":"July 17, 2020"},{"created":"2020-07-18 00:00:00+00","social_reach":57505,"date":"July 18, 2020"},{"created":"2020-07-19 00:00:00+00","social_reach":6620,"date":"July 19, 2020"},{"created":"2020-07-20 00:00:00+00","social_reach":45167,"date":"July 20, 2020"},{"created":"2020-07-21 00:00:00+00","social_reach":8422,"date":"July 21, 2020"},{"created":"2020-07-22 00:00:00+00","social_reach":158829,"date":"July 22, 2020"},{"created":"2020-07-23 00:00:00+00","social_reach":52065,"date":"July 23, 2020"}],"total":2379051},"top3MostEffectivePosts":[]};

        var pageId = '';
        var slideDom = $('#report_slide'+pageId);
        var custom = {
              color : '#8ebf6a',
              vendorLogoURL : 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/bg/buzzradar_logo_reports.png',
              bgURL : 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/bg/br_reports_bg.jpg',
        };
        console.log("Unique Page ID:", "report_slide"+pageId);
        console.log(pageDataJS);

        var formatNumber = function(value) {
          var finalValue;
          if (value > 1000000) {
            finalValue = Number((value/1000000).toFixed(2)) +' M';
            return finalValue;
          }
          if (value > 1000) {
            finalValue = Number((value/1000).toFixed(2)) +' K';
            return finalValue;
          }else{
            finalValue = value;
            return finalValue;
          }
        };

        var showPotentialReach = function(pageDataJS) {
          slideDom.find('h1').html('Potential Reach: <strong>'+formatNumber(pageDataJS.twitterDailyReach.total)+'</strong>');
        };

        var showStatsContent = function(arrayValues) {
          var ret = '';
          for (var i = 0; i < arrayValues.length; i++) {
            ret += arrayValues[i].value + ' ' + arrayValues[i].label + ' ';
          }
          return ret;
        };

        var getSocialIcon = function(social) {

          switch(social) {
            case "twitter":
              return 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/social/twitter_bird.png';
            break;
            case "facebook":
              return 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/social/facebook.png';
            break;
            case "instagram":
              return 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/social/instagram.png';
            break;
          }

        };

        var addImageContent = function(contentObj) {

          var ret = '';
          if (contentObj.image) {
            ret = '<div class="img_content_wrap"><img class="img_content" src="'+contentObj.image+'" /></div>';
          }
          return ret;

        };


        var getGradeColor = function(label) {

          label = label;
          var ret = label;


          switch(label){
            case "A+":
              ret = 'ap';
            break;
            case "":
              ret = 'invisible';
            break;
            default:
              ret = ret.toLowerCase();
            break;
          }


          return ret;

        };


        var addEngagementRate = function(contentObj) {

          var engagementHTML;
          switch(contentObj.source){
            case "twitter":
              engagementHTML = '<span>'+formatNumber(contentObj.engagements)+' <i class="fa fa-mouse-pointer"></i></span><span>'+formatNumber(contentObj.engagementRate)+' <i class="fa fa-chain"></i></span>';
            break;
            case "facebook":
              engagementHTML = '<span>'+formatNumber(contentObj.postActivity)+' <i class="fa fa-bullhorn margin-right-10"></i></span><span>'+formatNumber(contentObj.postClicks)+' <i class="fa fa-mouse-pointer"></i></span>';
            break;
            case "instagram":
              engagementHTML = '<span>'+formatNumber(contentObj.reach)+' (Reach)</span><span>'+formatNumber(contentObj.impressions)+' (Impressions)</span>';
            break;
          }
          return engagementHTML;

        };



        var getFollowers = function(contentObj) {

          var followersHTML;
          switch(contentObj.source){
            case "twitter":
              followersHTML = formatNumber(contentObj.followers);
            break;
            case "facebook":
              followersHTML = formatNumber(contentObj.followers);
            break;
            case "instagram":
              followersHTML = formatNumber(contentObj.followers);
            break;
          }
          return followersHTML;

        };



        var converUnixDateJavascript = function(UNIX_timestamp) {

          var a = new Date(UNIX_timestamp * 1000);
          var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
          var year = a.getFullYear();
          var month = months[a.getMonth()];
          var date = a.getDate();
          var hour = a.getHours();
          var min = a.getMinutes();
          var sec = a.getSeconds();
          var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;
          return time;

        };



        var showMostEffectiveContent = function(pageDataJS) {

          function loadMostInfluentialIntoDOM(contentObj) {
            var dom = slideDom.find('.most_effective_content');
            
            var template = '<div class="retweet '+contentObj.source+'" data-tweeturl="'+contentObj+'"><img class="social_network_corner_logo" src="'+getSocialIcon(contentObj.source)+'" width="40" /><div class="grade '+getGradeColor(contentObj.label)+'">'+contentObj.label+'</div><div class="avatar" style="background-image: url('+contentObj.avatar+');"></div><div class="handle">'+contentObj.username+'<br><div class="followers">'+getFollowers(contentObj)+' Followers</div></div><div class="copy">'+contentObj.content+'</div>'+addImageContent(contentObj)+'<div class="date"><u>'+  converUnixDateJavascript(contentObj.date.timestamp)+'</u> <strong>'+showStatsContent(contentObj.showValues)+'</strong>      <div class="eng-rate">'+addEngagementRate(contentObj)+'</div>         </div><div class="retweet_triangle '+contentObj.source+'"></div></div>';
            
            dom.append($(template));
          }


          function loadImage(tweetInfo) {
            tweetInfo.avatar = tweetInfo.avatar.replace('http://','https://');
            $.get(tweetInfo.avatar)
              .done(function() { 
                  // Do something now you know the image exists.
                  console.log("done!!!!");
                  loadMostInfluentialIntoDOM(tweetInfo);
              }).fail(function() { 
                  // Image doesn't exist - replace avatar with the EGG
                  console.log("fail!!!!!!!!!!!");
                  tweetInfo.avatar = 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/avatar/Twitter_NoProfileImage600x600.png';
                  loadMostInfluentialIntoDOM(tweetInfo);                  
              });              
          }


          if (pageDataJS.top3MostEffectivePosts.length == 0) {
            slideDom.find('.most_effective_content').html('<div class="display_error"><strong>Warning!</strong> 3 Most Effective Data is empty, check with Buzz Radar to see why.</div>');
          }else{
            for (var i = 0; i < pageDataJS.top3MostEffectivePosts.length; i++) {
              loadImage(pageDataJS.top3MostEffectivePosts[i]);
            }  
          }

          


          setTimeout(function() {
            checkHeightContent();
          },150);


        };


        var checkHeightContent = function() {

          $( ".retweet" ).each(function( index ) {
            //console.log( $( this ).height() );
            var h = $( this ).height();
            if (h>700){
              $(this).find('.img_content_wrap').addClass('short');
            }
          });

        };


        var customize = function(customObject) {

            //Change Color
            var newColor = customObject.color;
            slideDom.find('.slide-background').find('.left-bar').css('background',newColor);
            slideDom.find('.slide-background').find('.right-bar').css('background',newColor);
            slideDom.find('.report_title').css('borderColor',newColor);

            //Change Vendor Logo
            //Developer Note: To avoid having issues placing the different logos, they must be 
            //created within this dimensions: 300 x 131
            slideDom.find('.footer').find('img').attr('src',customObject.vendorLogoURL);
            slideDom.find('.footer').find('img').css('marginTop',-25);
            slideDom.find('.footer').find('img').css('width',170);

          };


        return {
            init: function () {
              showPotentialReach(pageDataJS);
              showMostEffectiveContent(pageDataJS);
              customize(custom);

            }
        };
        
      }();

      ThreeMostEffectivePostInstance.init();

    </script>


  </body>
</html>
