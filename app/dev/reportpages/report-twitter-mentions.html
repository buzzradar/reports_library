<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../favicon.ico">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="   sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">

    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,800&display=swap" rel="stylesheet">

    <link href="css/report-twitter-mentions.css" rel="stylesheet">

    <title>Buzz Radar Reports Page</title>

  </head>

  <body>

    <div id="report_slide" class="report-twitter-mentions" style="top:{{slideTop}}px;">

      <div class="slide-background">
        
        <div class="bubbles">
          <div class="b-top"></div>
          <div class="b-middle"></div>
          <div class="b-bottom"></div>
        </div>
        <div class="left-bar orange"></div>
        <div class="right-bar orange"></div>
        <div class="vertical"></div>

      </div>

      <div class="slide">
          
          <div class="report_title">
              <div class="top">{{report.name}}</div>
              <div class="bottom">{{topic.name}}: <span>xxxxxx</span></div>
          </div>

          <div class="content">


            <div class="main-layout-wrap">
              <div class="col1">
                <!-- <div class="col_title year">Year: XXXX</div> -->
                <div id="line_graph" class="graph_wrap" style="height:850px;width:1350px;"></div>
              </div>

              <div class="big_circle" style="left:1440px;top:80px;">
                <p>MentionsXXX</p>
                <h2>XXX</h2>
              </div>

            </div>

          </div>


      </div>

      <div class="footer">
          <div class="date-range">Date Range: {{fromDate | date('jS M Y') }} - {{ toDate | date('jS M Y') }}</div>
          <img src="https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/logos/RGB_NAME_WHITEBG_SMALL72.png" width="200">
      </div>

    </div>





    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="../libraries/amcharts/amcharts.js"></script>
    <script src="../libraries/amcharts/serial.js"></script>

    <script>


      var TWMentionsInstance = function () {

          //DEVELOPER NOTE:
          //This slide has the same layout but different sources. I need to make sure that the source is adjusted 
          //for each individual case.
          //It can display:
          // - Twitter Mentions
          // - Twitter Followers
          // - Facebook Likes
          // - Twitter Reach
          // -------------------------------------          

          //Twitter Mentions  
          //var pageDataJS = {"twitterDailyMentions":{"chart":[{"created":"2020-12-30 00:00:00+00","twitter_mentions":10,"date":"December 30, 2020"},{"created":"2020-12-31 00:00:00+00","twitter_mentions":8,"date":"December 31, 2020"},{"created":"2021-01-01 00:00:00+00","twitter_mentions":12,"date":"January 01, 2021"},{"created":"2021-01-02 00:00:00+00","twitter_mentions":11,"date":"January 02, 2021"},{"created":"2021-01-03 00:00:00+00","twitter_mentions":9,"date":"January 03, 2021"},{"created":"2021-01-04 00:00:00+00","twitter_mentions":9,"date":"January 04, 2021"},{"created":"2021-01-05 00:00:00+00","twitter_mentions":13,"date":"January 05, 2021"},{"created":"2021-01-06 00:00:00+00","twitter_mentions":2,"date":"January 06, 2021"},{"created":"2021-01-07 00:00:00+00","twitter_mentions":4,"date":"January 07, 2021"},{"created":"2021-01-08 00:00:00+00","twitter_mentions":7,"date":"January 08, 2021"},{"created":"2021-01-09 00:00:00+00","twitter_mentions":7,"date":"January 09, 2021"},{"created":"2021-01-10 00:00:00+00","twitter_mentions":3,"date":"January 10, 2021"},{"created":"2021-01-11 00:00:00+00","twitter_mentions":10,"date":"January 11, 2021"},{"created":"2021-01-12 00:00:00+00","twitter_mentions":13,"date":"January 12, 2021"},{"created":"2021-01-13 00:00:00+00","twitter_mentions":9,"date":"January 13, 2021"},{"created":"2021-01-14 00:00:00+00","twitter_mentions":17,"date":"January 14, 2021"},{"created":"2021-01-15 00:00:00+00","twitter_mentions":12,"date":"January 15, 2021"},{"created":"2021-01-16 00:00:00+00","twitter_mentions":9,"date":"January 16, 2021"},{"created":"2021-01-17 00:00:00+00","twitter_mentions":12,"date":"January 17, 2021"},{"created":"2021-01-18 00:00:00+00","twitter_mentions":9,"date":"January 18, 2021"},{"created":"2021-01-19 00:00:00+00","twitter_mentions":7,"date":"January 19, 2021"},{"created":"2021-01-20 00:00:00+00","twitter_mentions":5,"date":"January 20, 2021"},{"created":"2021-01-21 00:00:00+00","twitter_mentions":12,"date":"January 21, 2021"},{"created":"2021-01-22 00:00:00+00","twitter_mentions":10,"date":"January 22, 2021"},{"created":"2021-01-23 00:00:00+00","twitter_mentions":21,"date":"January 23, 2021"},{"created":"2021-01-24 00:00:00+00","twitter_mentions":15,"date":"January 24, 2021"},{"created":"2021-01-25 00:00:00+00","twitter_mentions":7,"date":"January 25, 2021"},{"created":"2021-01-26 00:00:00+00","twitter_mentions":7,"date":"January 26, 2021"},{"created":"2021-01-27 00:00:00+00","twitter_mentions":11,"date":"January 27, 2021"},{"created":"2021-01-28 00:00:00+00","twitter_mentions":3,"date":"January 28, 2021"}],"total":284}};

          //Twitter Followers
          //var pageDataJS = {"twitterDailyFollowers":{"total":-6380,"chart":[{"created":"2020-12-30 00:00:00+00","twitter_followers":-94,"total_followers":8263507,"date":"December 30, 2020"},{"created":"2020-12-31 00:00:00+00","twitter_followers":-40,"total_followers":8263413,"date":"December 31, 2020"},{"created":"2021-01-01 00:00:00+00","twitter_followers":72,"total_followers":8263373,"date":"January 01, 2021"},{"created":"2021-01-02 00:00:00+00","twitter_followers":11,"total_followers":8263445,"date":"January 02, 2021"},{"created":"2021-01-03 00:00:00+00","twitter_followers":112,"total_followers":8263456,"date":"January 03, 2021"},{"created":"2021-01-04 00:00:00+00","twitter_followers":5,"total_followers":8263568,"date":"January 04, 2021"},{"created":"2021-01-05 00:00:00+00","twitter_followers":-175,"total_followers":8263573,"date":"January 05, 2021"},{"created":"2021-01-06 00:00:00+00","twitter_followers":41,"total_followers":8263398,"date":"January 06, 2021"},{"created":"2021-01-07 00:00:00+00","twitter_followers":-33,"total_followers":8263439,"date":"January 07, 2021"},{"created":"2021-01-08 00:00:00+00","twitter_followers":-175,"total_followers":8263406,"date":"January 08, 2021"},{"created":"2021-01-09 00:00:00+00","twitter_followers":-1826,"total_followers":8263231,"date":"January 09, 2021"},{"created":"2021-01-10 00:00:00+00","twitter_followers":-1304,"total_followers":8261405,"date":"January 10, 2021"},{"created":"2021-01-11 00:00:00+00","twitter_followers":-784,"total_followers":8260101,"date":"January 11, 2021"},{"created":"2021-01-12 00:00:00+00","twitter_followers":-745,"total_followers":8259317,"date":"January 12, 2021"},{"created":"2021-01-13 00:00:00+00","twitter_followers":-408,"total_followers":8258572,"date":"January 13, 2021"},{"created":"2021-01-14 00:00:00+00","twitter_followers":-191,"total_followers":8258164,"date":"January 14, 2021"},{"created":"2021-01-15 00:00:00+00","twitter_followers":-315,"total_followers":8257973,"date":"January 15, 2021"},{"created":"2021-01-16 00:00:00+00","twitter_followers":-59,"total_followers":8257658,"date":"January 16, 2021"},{"created":"2021-01-17 00:00:00+00","twitter_followers":-52,"total_followers":8257599,"date":"January 17, 2021"},{"created":"2021-01-18 00:00:00+00","twitter_followers":-101,"total_followers":8257547,"date":"January 18, 2021"},{"created":"2021-01-19 00:00:00+00","twitter_followers":-145,"total_followers":8257446,"date":"January 19, 2021"},{"created":"2021-01-20 00:00:00+00","twitter_followers":197,"total_followers":8257301,"date":"January 20, 2021"},{"created":"2021-01-21 00:00:00+00","twitter_followers":32,"total_followers":8257498,"date":"January 21, 2021"},{"created":"2021-01-22 00:00:00+00","twitter_followers":69,"total_followers":8257530,"date":"January 22, 2021"},{"created":"2021-01-23 00:00:00+00","twitter_followers":-19,"total_followers":8257599,"date":"January 23, 2021"},{"created":"2021-01-24 00:00:00+00","twitter_followers":-65,"total_followers":8257580,"date":"January 24, 2021"},{"created":"2021-01-25 00:00:00+00","twitter_followers":-48,"total_followers":8257515,"date":"January 25, 2021"},{"created":"2021-01-26 00:00:00+00","twitter_followers":-288,"total_followers":8257467,"date":"January 26, 2021"},{"created":"2021-01-27 00:00:00+00","twitter_followers":6,"total_followers":8257179,"date":"January 27, 2021"},{"created":"2021-01-28 00:00:00+00","twitter_followers":-58,"total_followers":8257185,"date":"January 28, 2021"}]}};

          //Facebook Likes
          //var pageDataJS = {"facebookDailyLikes":{"chart":[{"created":"2020-12-30 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"December 30, 2020"},{"created":"2020-12-31 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"December 31, 2020"},{"created":"2021-01-01 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 01, 2021"},{"created":"2021-01-02 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 02, 2021"},{"created":"2021-01-03 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 03, 2021"},{"created":"2021-01-04 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 04, 2021"},{"created":"2021-01-05 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 05, 2021"},{"created":"2021-01-06 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 06, 2021"},{"created":"2021-01-07 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 07, 2021"},{"created":"2021-01-08 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 08, 2021"},{"created":"2021-01-09 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 09, 2021"},{"created":"2021-01-10 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 10, 2021"},{"created":"2021-01-11 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 11, 2021"},{"created":"2021-01-12 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 12, 2021"},{"created":"2021-01-13 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 13, 2021"},{"created":"2021-01-14 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 14, 2021"},{"created":"2021-01-15 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 15, 2021"},{"created":"2021-01-16 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 16, 2021"},{"created":"2021-01-17 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 17, 2021"},{"created":"2021-01-18 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 18, 2021"},{"created":"2021-01-19 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 19, 2021"},{"created":"2021-01-20 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 20, 2021"},{"created":"2021-01-21 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 21, 2021"},{"created":"2021-01-22 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 22, 2021"},{"created":"2021-01-23 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 23, 2021"},{"created":"2021-01-24 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 24, 2021"},{"created":"2021-01-25 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 25, 2021"},{"created":"2021-01-26 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 26, 2021"},{"created":"2021-01-27 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 27, 2021"},{"created":"2021-01-28 00:00:00+00","facebook_likes":0,"total_facebook_likes":250,"date":"January 28, 2021"}],"gained_likes":0,"total":250}};

          //Twitter Reach
          var pageDataJS = {"twitterDailyReach":{"chart":[{"created":"2020-12-30 00:00:00+00","social_reach":341358,"date":"December 30, 2020"},{"created":"2020-12-31 00:00:00+00","social_reach":392105,"date":"December 31, 2020"},{"created":"2021-01-01 00:00:00+00","social_reach":325428,"date":"January 01, 2021"},{"created":"2021-01-02 00:00:00+00","social_reach":330464,"date":"January 02, 2021"},{"created":"2021-01-03 00:00:00+00","social_reach":252601,"date":"January 03, 2021"},{"created":"2021-01-04 00:00:00+00","social_reach":308485,"date":"January 04, 2021"},{"created":"2021-01-05 00:00:00+00","social_reach":2370198,"date":"January 05, 2021"},{"created":"2021-01-06 00:00:00+00","social_reach":8618970,"date":"January 06, 2021"},{"created":"2021-01-07 00:00:00+00","social_reach":868714,"date":"January 07, 2021"},{"created":"2021-01-08 00:00:00+00","social_reach":891693,"date":"January 08, 2021"},{"created":"2021-01-09 00:00:00+00","social_reach":473567,"date":"January 09, 2021"},{"created":"2021-01-10 00:00:00+00","social_reach":293279,"date":"January 10, 2021"},{"created":"2021-01-11 00:00:00+00","social_reach":309442,"date":"January 11, 2021"},{"created":"2021-01-12 00:00:00+00","social_reach":1836882,"date":"January 12, 2021"},{"created":"2021-01-13 00:00:00+00","social_reach":3701401,"date":"January 13, 2021"},{"created":"2021-01-14 00:00:00+00","social_reach":772668,"date":"January 14, 2021"},{"created":"2021-01-15 00:00:00+00","social_reach":251828,"date":"January 15, 2021"},{"created":"2021-01-16 00:00:00+00","social_reach":1309282,"date":"January 16, 2021"},{"created":"2021-01-17 00:00:00+00","social_reach":786696,"date":"January 17, 2021"},{"created":"2021-01-18 00:00:00+00","social_reach":969802,"date":"January 18, 2021"},{"created":"2021-01-19 00:00:00+00","social_reach":4481752,"date":"January 19, 2021"},{"created":"2021-01-20 00:00:00+00","social_reach":25156779,"date":"January 20, 2021"},{"created":"2021-01-21 00:00:00+00","social_reach":2214564,"date":"January 21, 2021"},{"created":"2021-01-22 00:00:00+00","social_reach":1429777,"date":"January 22, 2021"},{"created":"2021-01-23 00:00:00+00","social_reach":598933,"date":"January 23, 2021"},{"created":"2021-01-24 00:00:00+00","social_reach":322554,"date":"January 24, 2021"},{"created":"2021-01-25 00:00:00+00","social_reach":687732,"date":"January 25, 2021"},{"created":"2021-01-26 00:00:00+00","social_reach":1364155,"date":"January 26, 2021"},{"created":"2021-01-27 00:00:00+00","social_reach":8416467,"date":"January 27, 2021"},{"created":"2021-01-28 00:00:00+00","social_reach":266140,"date":"January 28, 2021"}],"total":70343716}};

          var pageId = '';
          var slideDom = $('#report_slide'+pageId);
          var custom = {
              color : '#8ebf6a',
              vendorLogoURL : 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/bg/buzzradar_logo_reports.png',
              bgURL : 'https://3c90f21d2e52d99af65d-cc7a500d9b10d65e67a8ddf30b9c21f5.ssl.cf3.rackcdn.com/reports_imgs/bg/br_reports_bg.jpg',
          };
          console.log("Unique Page ID:", "report_slide"+pageId);
          console.log(pageDataJS);


          var formatNumber = function(value) {
            var finalValue;
            if (value > 1000000) {
              finalValue = Number((value/1000000).toFixed(2)) +' M';
              return finalValue;
            }
            if (value > 1000) {
              finalValue = Number((value/1000).toFixed(2)) +' K';
              return finalValue;
            }else{
              finalValue = value;
              return finalValue;
            }
          };

          var getPercentage = function(total, value) {

              return Math.round(value/total * 100);

          };


          var getObjectKey = function() {

            var objKey = ''
            if ('twitterDailyMentions' in pageDataJS) {
                objKey = "twitterDailyMentions";
            }
            if ('twitterDailyFollowers' in pageDataJS) {
                objKey = "twitterDailyFollowers";
            }
            if ('facebookDailyLikes' in pageDataJS) {
                objKey = "facebookDailyLikes";
            }
            if ('twitterDailyReach' in pageDataJS) {
                objKey = "twitterDailyReach";
            }
            
            //console.log ("%c ➜ ", "background:#34feff;", objKey);
            return objKey;

          }


          var showBadge = function() { 

            var dom = slideDom.find('.big_circle');
            var total = pageDataJS[getObjectKey()].total;

            dom.find('p').html(getTitle());
            dom.find('h2').html(formatNumber(total));

          };

          var loadChart = function() {

            var graphStructure;
            if (getObjectKey() == "twitterDailyMentions") {
                graphStructure = [
                    {
                        "balloonText":"[[value]] Mentions",
                        "bullet":"round",
                        "id":"AmGraph-1",
                        "lineColor":"#4B77BE",
                        "title":"Twitter Mentions",
                        "valueField":"twitter_mentions"
                    }
                ]
            }
            if (getObjectKey() == "twitterDailyFollowers") {
                graphStructure = [
                    {
                        "balloonText":"[[value]] Follwers",
                        "bullet":"round",
                        "id":"AmGraph-1",
                        "lineColor":"#4B77BE",
                        "title":"Twitter Followers",
                        "valueField":"twitter_followers"
                    }
                ]
            }
            if (getObjectKey() == "facebookDailyLikes") {
                graphStructure = [
                    {
                        "balloonText":"[[value]] Facebook Likes",
                        "bullet":"round",
                        "id":"AmGraph-1",
                        "lineColor":"#4B77BE",
                        "title":"Facebook Likes",
                        "valueField":"facebook_likes"
                    }
                ]
            }
            if (getObjectKey() == "twitterDailyReach") {
                graphStructure = [
                    {
                        "balloonText":"[[value]] Twitter Reach",
                        "bullet":"round",
                        "id":"AmGraph-1",
                        "lineColor":"#4B77BE",
                        "title":"Twitter Reach",
                        "valueField":"social_reach"
                    }
                ]
            }

            AmCharts.makeChart(slideDom.find('.col1').find('.graph_wrap').get(0), 
                {
                   "type":"serial",
                   "categoryField":"date",
                   "dataDateFormat":"YYYY-MM-DD",
                   "addClassNames": true,
                   "categoryAxis":{
                      "parseDates":!0,
                      "gridThickness":0,
                      "gridAlpha" : 0,
                   },
                   "chartCursor":{
                      "enabled":!0,
                      "oneBalloonOnly":!0
                   },
                   "trendLines":[
                      
                   ],
                   "graphs":graphStructure,
                   "guides":[
                      
                   ],
                   "valueAxes":[
                      {
                         "id":"ValueAxis-1",
                         "title":"",
                         "gridThickness":0,
                         "gridAlpha" : 0,
                      }
                   ],
                   "allLabels":[
                      
                   ],
                   "balloon":{
                      
                   },
                   "legend":{
                      "enabled":!0,
                      "align":"center"
                   },
                   "titles":[
                      
                   ],
                   "dataProvider": pageDataJS[getObjectKey()].chart
                });

          };
          

          var getTitle = function() {

            var title;
            if (getObjectKey() == "twitterDailyMentions") {
                title = "Twitter Mentions";
            }
            if (getObjectKey() == "twitterDailyFollowers") {
                title = "Twitter Followers";
            }
            if (getObjectKey() == "facebookDailyLikes") {
                title = "Facebook Likes";
            }
            if (getObjectKey() == "twitterDailyReach") {
                title = "Twitter Reach";
            }

            return title;

          };


          var customize = function(customObject) {

            //Change Color
            var newColor = customObject.color;
            slideDom.find('.slide-background').find('.left-bar').css('background',newColor);
            slideDom.find('.slide-background').find('.right-bar').css('background',newColor);
            slideDom.find('.report_title').css('borderColor',newColor);
            slideDom.find('.big_circle').css('background',newColor);

            //Change Vendor Logo
            //Developer Note: To avoid having issues placing the different logos, they must be 
            //created within this dimensions: 300 x 131
            slideDom.find('.footer').find('img').attr('src',customObject.vendorLogoURL);
            slideDom.find('.footer').find('img').css('marginTop',-25);
            slideDom.find('.footer').find('img').css('width',170);

          };

          return {
              init: function () {
                slideDom.find('.report_title').find('span').html(getTitle());
                showBadge();
                loadChart();
                customize(custom);
              }
          };

      }();

      TWMentionsInstance.init();


    </script>


  </body>
</html>
